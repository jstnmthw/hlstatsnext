# Next.js v16 Work Log — games-public-real-data

## Request

The public `/games` route needs to pull from the database, filtering to only show games where `hidden` is not set (i.e., `hidden = "0"`).

## Context captured

- Runtime introspection: Yes — Next.js dev server on port 3000, no errors detected.
- Affected routes: `/(public)/games/page.tsx`

## Changes made

- **Replaced mock data** (`MOCK_GAMES`, `MOCK_SERVERS`) with a real GraphQL query using `query()` from `@/lib/apollo-client`.
- Added `GET_PUBLIC_GAMES` query with `where: { hidden: { equals: "0" } }` filter.
- Converted `GamesPage` from a sync to an `async` Server Component.
- Removed server count display (Game model has no `servers` relation in the Prisma schema).
- Ran codegen to generate types for the new query.

**Files touched:**

- `apps/web/src/app/(public)/games/page.tsx`
- `apps/web/src/lib/gql/` (generated by codegen)

## Rationale (doc-backed where applicable)

- Server Components can be `async` and `await` data fetches directly.
  - https://nextjs.org/docs/app/building-your-application/rendering/server-components
- Using `query()` from the Apollo client integration for Next.js follows the established repo pattern (matches `game-list.tsx` and admin pages).

## Verification

- `pnpm --filter web exec graphql-codegen` — passed, new query typed correctly.
- `pnpm --filter web run check-types` — passed, zero errors.
- `nextjs_call get_errors` on port 3000 — no errors.

## Follow-ups

- Server count per game could be added if a `Server` model with a `game` relation is added to the Prisma schema and exposed via GraphQL.
